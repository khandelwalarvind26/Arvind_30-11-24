
# Uptime Report Generator

The Uptime Report Generator is a Python-based tool that processes store monitoring data and generates uptime reports. This application interacts with a PostgreSQL database to ingest CSV data, process it, and serve reports via an API.

---

## Requirements

- **Python 3.8** or higher
- **pip** package manager

---

## Setup Instructions

Follow these steps to set up and run the project locally:

### 1. Clone the Repository
Clone the project repository to your local machine:

```bash
git clone https://github.com/khandelwalarvind26/Arvind_30-11-24.git
```

Navigate into the project folder:

```bash
cd Arvind_30-11-24
```

### 2. Set Up a Virtual Environment
Create a new virtual environment:

```bash
python -m venv venv
```

Activate the virtual environment:

- On **Windows**:
  ```bash
  .\env\Scripts\ctivate
  ```

- On **macOS/Linux**:
  ```bash
  source venv/bin/activate
  ```

### 3. Install Dependencies
Install the required Python packages:

```bash
pip install -r requirements.txt
```

### 4. Prepare Data
Copy the required CSV files (`store_status.csv`, `menu_hours.csv`, `timezones.csv`) into the `app/ingestion/csv` directory.  

Alternatively, you can download the demo data from the following link:  
[Store Monitoring Data ZIP](https://storage.googleapis.com/hiring-problem-statements/store-monitoring-data.zip)

Extract the files and place them in the `app/ingestion/csv` directory.

### 5. Configure Environment Variables
Create a `.env` file in the root of the project (if it doesnâ€™t already exist) and add your database URL:

```bash
DATABASE_URL="postgresql+asyncpg://USERNAME:PASSWORD@ADDRESS:PORT/DBNAME"
```

Replace `USERNAME`, `PASSWORD`, `ADDRESS`, `PORT`, and `DBNAME` with your actual database credentials.

### 6. Ingest Data
Run the data ingestion script to load the CSV data into the database:

```bash
python -m app.ingestion.ingestion
```

### 7. Start the Application
Start the FastAPI server:

```bash
uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

The server will be available at `http://127.0.0.1:8000`.

---

## How to Use

1. After starting the server, access the API documentation at:

   [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

2. Use the interactive **Swagger UI** to explore and test the endpoints.

3. To download a CSV file for a completed report, make a GET request by replacing `report_id` with the actual ID:

   ```bash
   http://127.0.0.1:8000/report/get?id=report_id
   ```

---

## Sample Report

You can view a sample report generated by the application from the following link:

[Sample Uptime Report](https://drive.google.com/file/d/1Faocn79e8MmtELxCa9qHw-8Kfr1n9xc1/view?usp=sharing)

**Note**: This report was generated from the `2024-10-07 12:40:00` timestamp because there weren't sufficient entries in the database for the current timestamp.

---

### Additional Notes:
- Make sure that your PostgreSQL database is running and accessible before starting the ingestion process.
- The server automatically reloads on code changes when running with the `--reload` option, useful during development.
